# gcp-service

## What?

See: https://github.com/weaveworks/service-conf/blob/main/docs/05-CORESERVICES.md#gcp-service

## Why?

See: https://docs.google.com/document/d/1ZKzGepsjBOf1yCLi10UJKBW5zpVfE8x6KIeF3n-DsTo

## Architecture

```
       +---------------------------------------------------------------------------------------------------------------------------+
       |                                                      Weave Cloud                                                          |
       |                    +--------------------------------------------------------------------------+                           |
       |                    |                          gcp-service       +--------------+              |  +------------+           |
       | +----------------+ | +----------------+                      /->| dao/users.go |---------------->| ../users/* |           |
       | | grpc/client.go |-->| grpc/server.go |\                    /   +--------------+              |  +------------+           |
       | +----------------+ | +----------------+ \   +-----------+  /    +-------------------+         |                           | +------------+
       |                    |                     +->| service/* |-+---->| ../common/gcp/gke |-------------------------------------->| GCP's APIs |
+----+ |                    | +----------------+ /   +-----------+  \    +-------------------+         |                           | +------------+
| UI |----------------------->| http/server.go |/                    \   +---------------------------+ |  +----------------------+ |
+----+ |via authfe          | +----------------+                      \->| ../kubectl-service/grpc/* |--->| ../kubectl-service/* | |
       |                    |                                            +---------------------------+ |  +----------------------+ |
       |                    +--------------------------------------------------------------------------+                           |
       +---------------------------------------------------------------------------------------------------------------------------+
```
