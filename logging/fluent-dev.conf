<source>
  @type forward
  port 24224
  bind 127.0.0.1
</source>


# input plugin that exports metrics
<source>
  @type prometheus
</source>

# input plugin that collects metrics from MonitorAgent
<source>
  @type prometheus_monitor
</source>

# input plugin that collects metrics for output plugin
<source>
  @type prometheus_output_monitor
</source>

<match events>
   @type bigquery

   method load

   # buffering
   buffer_type file
   buffer_path /var/log/bigquery.*.buffer
   flush_interval 1800
   try_flush_interval 1
   flush_at_shutdown true
   utc

   auth_method json_key
   json_key /bigquery/secret/key.json

   project weaveworks-bi
   dataset service_dev
   table events
   schema_path /bigquery/schema_service_events.json

   time_field   dt
   time_format  %s
</match>
